# Случайная задача

Минимальное мобильное одностраничное веб-приложение для выбора случайной доступной задачи по блоку.

## Запуск

1. Откройте терминал в папке проекта.
2. Запустите простой статический сервер:

```bash
python3 -m http.server 8000
```

3. Откройте в браузере: <http://localhost:8000>

## Что умеет приложение

- Блоки задач хранятся в `localStorage` по ключу `random_task_picker_blocks_v1`.
- Задачи хранятся в `localStorage` по ключу `random_task_picker_tasks_v1`.
- При первом запуске выполняется миграция:
  - если блоков еще нет, они создаются как уникальные `task.block` из уже сохраненных задач (в порядке появления);
  - если задач и блоков нет, создается блок **«Мой блок»**.
- Кнопка **«Добавить задачу»** создает задачу для выбранного блока c полями:
  - название;
  - периодичность в днях;
  - `last_done: null`.
- Под формой показывается список задач выбранного блока:
  - название;
  - периодичность;
  - дата последнего выполнения или **«никогда»**;
  - кнопки **«Сделано» / «Редактировать» / «Удалить»**.
- Кнопка **«Выбрать»** выбирает случайную доступную задачу по логике периодичности.
- Верхняя кнопка **«Сделано»** появляется после случайного выбора задачи и отмечает именно выбранную задачу.
- Кнопка **«Сделано»** в строке задачи работает всегда, даже если задача не была выбрана рандомом:
  - ставит `last_done` на сегодняшнюю дату;
  - сохраняет изменения в `localStorage`;
  - сразу обновляет список;
  - если эта задача была текущей выбранной, выбор сбрасывается и верхняя кнопка **«Сделано»** скрывается.
- Кнопка **«Редактировать»** у задачи меняет только:
  - название;
  - периодичность (дней).

  Поле `last_done` при редактировании не изменяется.
- Кнопка **«Удалить»** у задачи удаляет задачу.
- Если в выбранном блоке нет задач, показывается сообщение: **«В этом блоке нет задач»**.
- Кнопка **«Сбросить данные»** полностью очищает `localStorage`.

## Управление блоками

Рядом с выбором блока есть три кнопки: **«Добавить блок»**, **«Переименовать»**, **«Удалить блок»**.

### Добавить блок

1. Нажмите **«Добавить блок»**.
2. Введите название в `prompt`.
3. Блок будет добавлен и сразу выбран.

Ограничения:
- нельзя добавить пустое название;
- нельзя добавить дубликат (названия сравниваются с учетом обрезки пробелов по краям).

### Переименовать блок

1. Выберите блок.
2. Нажмите **«Переименовать»**.
3. Введите новое название.

При переименовании обновляется и поле `block` у всех задач этого блока.

Ограничения:
- новое название не может быть пустым;
- нельзя переименовать в уже существующее название (с учетом обрезки пробелов по краям).

### Удалить блок

1. Выберите блок.
2. Нажмите **«Удалить блок»** и подтвердите удаление.
3. Если в блоке есть задачи, приложение предложит выбрать действие:
   - `A` — удалить все задачи блока;
   - `B` — перенести задачи в другой существующий блок.

Если удаляется последний блок, приложение автоматически создаст новый блок **«Мой блок»**.
